(()=>{var t={n:a=>{var r=a&&a.__esModule?()=>a.default:()=>a;return t.d(r,{a:r}),r},d:(a,r)=>{for(var e in r)t.o(r,e)&&!t.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:r[e]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};(()=>{"use strict";function r(t,a){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},r(t,a)}t.r(a);const e=flarum.core.compat["common/components/Button"];var o=t.n(e);const n=flarum.core.compat["common/components/Switch"];var i=t.n(n);const s=flarum.core.compat["forum/app"];var c=t.n(s);const u=flarum.core.compat["forum/components/UserPage"];var l=t.n(u),p=function(t){return c().translator.trans("nearata-minecraft-avatars.forum."+t)},f=function(t){var a,e;function n(){for(var a,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).switchLoading=void 0,a.loading=void 0,a.user=void 0,a.avatar=void 0,a}e=t,(a=n).prototype=Object.create(e.prototype),a.prototype.constructor=a,r(a,e);var s=n.prototype;return s.oninit=function(a){t.prototype.oninit.call(this,a),this.show(c().session.user),c().setTitle(p("page_title").toString()),this.switchLoading=!1,this.loading=!1,this.avatar=this.user.attribute("minotar")},s.content=function(){var t=this;return[m(".MinecraftAvatarsPage",[m(".Form",[m(".Form-group",[m("input",{type:"name",name:"minotar",class:"FormControl",placeholder:p("placeholder"),oninput:function(a){return t.avatar=a.target.value},autocomplete:"off",value:this.avatar}),m("p.helpText",p("help_text"))]),m(".Form-group",[m(o(),{class:"Button Button--primary Button--block",disabled:this.loading||this.avatar===this.user.attribute("minotar")||this.avatar.length<3,onclick:function(a){t.loading=!0,t.user.save({minotar:t.avatar}).then((function(){delete t.user.avatarColor,t.loading=!1,t.avatar=t.user.attribute("minotar"),m.redraw()}),(function(){t.loading=!1,m.redraw()}))}},p("submit_button"))]),m(".Form-group",[m(i(),{state:this.user.attribute("minotarEnabled"),onchange:function(a){t.switchLoading=!0,t.user.save({minotarEnabled:a}).then((function(){delete t.user.avatarColor,t.switchLoading=!1,m.redraw()}))},loading:this.switchLoading},p("minotar_enabled"))])])])]},n}(l());const d=flarum.core.compat["common/components/LinkButton"];var v=t.n(d);const h=flarum.core.compat["common/extend"],b=flarum.core.compat["common/models/User"];var g=t.n(b);c().initializers.add("nearata-minecraft-avatars",(function(){c().routes.minecraftAvatars={path:"/minecraft-avatars",component:f};var t=new Set(["MHF_Steve","MHF_Alex"]),a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12})$/i;g().prototype.avatarUrl=function(){var r=this.attribute("minotar"),e=this.attribute("avatarUrl");if(!r)return e;if(!this.attribute("minotarEnabled"))return e;var o=new URL("https://crafatar.com/avatars/");return o.searchParams.append("size","64"),a.test(r)||(t.has(r)?o.searchParams.append("default",r):o.searchParams.append("default","MHF_Steve"),r="00000000-0000-0000-0000-000000000000"),o.pathname+=r,o.toString()},(0,h.extend)(l().prototype,"navItems",(function(t){c().session.user===this.user&&t.add("nearataMinecraftAvatars",m(v(),{icon:"fas fa-cloud-upload-alt",href:c().route("minecraftAvatars")},c().translator.trans("nearata-minecraft-avatars.forum.userpage_nav_button")),1)}))}))})(),module.exports=a})();
//# sourceMappingURL=forum.js.map