(()=>{var t={n:a=>{var r=a&&a.__esModule?()=>a.default:()=>a;return t.d(r,{a:r}),r},d:(a,r)=>{for(var e in r)t.o(r,e)&&!t.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:r[e]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};(()=>{"use strict";t.r(a);const r=flarum.core.compat["common/extend"],e=flarum.core.compat["forum/app"];var o=t.n(e);const n=flarum.core.compat["common/models/User"];var i=t.n(n);const s=flarum.core.compat["forum/components/UserPage"];var c=t.n(s);const u=flarum.core.compat["common/components/LinkButton"];var l=t.n(u);function p(t,a){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},p(t,a)}const f=flarum.core.compat["common/components/Button"];var d=t.n(f);const v=flarum.core.compat["common/components/Switch"];var h=t.n(v),b=function(t){return o().translator.trans("nearata-minecraft-avatars.forum."+t)},g=function(t){var a,r;function e(){for(var a,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).switchLoading=void 0,a.loading=void 0,a.user=void 0,a.avatar=void 0,a}r=t,(a=e).prototype=Object.create(r.prototype),a.prototype.constructor=a,p(a,r);var n=e.prototype;return n.oninit=function(a){t.prototype.oninit.call(this,a),this.show(o().session.user),o().setTitle(b("page_title").toString()),this.switchLoading=!1,this.loading=!1,this.avatar=this.user.attribute("minotar")},n.content=function(){var t=this;return[m(".MinecraftAvatarsPage",[m(".Form",[m(".Form-group",[m("input",{type:"name",name:"minotar",class:"FormControl",placeholder:b("placeholder"),oninput:function(a){return t.avatar=a.target.value},autocomplete:"off",value:this.avatar}),m("p.helpText",b("help_text"))]),m(".Form-group",[m(d(),{class:"Button Button--primary Button--block",disabled:this.loading||this.avatar===this.user.attribute("minotar")||this.avatar.length<3,onclick:function(a){t.loading=!0,t.user.save({minotar:t.avatar}).then((function(){delete t.user.avatarColor,t.loading=!1,t.avatar=t.user.attribute("minotar"),m.redraw()}),(function(){t.loading=!1,m.redraw()}))}},b("submit_button"))]),m(".Form-group",[m(h(),{state:this.user.attribute("minotarEnabled"),onchange:function(a){t.switchLoading=!0,t.user.save({minotarEnabled:a}).then((function(){delete t.user.avatarColor,t.switchLoading=!1,m.redraw()}))},loading:this.switchLoading},b("minotar_enabled"))])])])]},e}(c());o().initializers.add("nearata-minecraft-avatars",(function(){o().routes.minecraftAvatars={path:"/minecraft-avatars",component:g};var t=new Set(["MHF_Steve","MHF_Alex"]),a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12})$/i;i().prototype.avatarUrl=function(){var r=this.attribute("minotar"),e=this.attribute("avatarUrl");if(!r)return e;if(!this.attribute("minotarEnabled"))return e;var o=new URL("https://crafatar.com/avatars/");return o.searchParams.append("size","64"),a.test(r)||(t.has(r)?o.searchParams.append("default",r):o.searchParams.append("default","MHF_Steve"),r="00000000-0000-0000-0000-000000000000"),o.pathname+=r,o.toString()},(0,r.extend)(c().prototype,"navItems",(function(t){o().session.user===this.user&&t.add("nearataMinecraftAvatars",m(l(),{icon:"fas fa-cloud-upload-alt",href:o().route("minecraftAvatars")},o().translator.trans("nearata-minecraft-avatars.forum.userpage_nav_button")),1)}))}))})(),module.exports=a})();
//# sourceMappingURL=forum.js.map