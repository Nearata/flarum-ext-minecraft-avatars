module.exports=function(t){var r={};function a(n){if(r[n])return r[n].exports;var e=r[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=t,a.c=r,a.d=function(t,r,n){a.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,r){if(1&r&&(t=a(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var e in t)a.d(n,e,function(r){return t[r]}.bind(null,e));return n},a.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(r,"a",r),r},a.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},a.p="",a(a.s=6)}([function(t,r){t.exports=flarum.core.compat.app},function(t,r){t.exports=flarum.core.compat["components/Button"]},function(t,r){t.exports=flarum.core.compat.extend},function(t,r){t.exports=flarum.core.compat["components/AvatarEditor"]},function(t,r){t.exports=flarum.core.compat["models/User"]},function(t,r){t.exports=flarum.core.compat["components/Modal"]},function(t,r,a){"use strict";a.r(r);var n=a(0),e=a.n(n),o=a(2),i=a(3),s=a.n(i),u=a(1),c=a.n(u),p=a(4),l=a.n(p);function f(t,r){return(f=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var d=a(5),h=function(t){var r,a;function n(){return t.apply(this,arguments)||this}a=t,(r=n).prototype=Object.create(a.prototype),r.prototype.constructor=r,f(r,a);var e=n.prototype;return e.oninit=function(r){t.prototype.oninit.call(this,r),this.success=!1,this.oldMinotar=app.session.user.attribute("minotar"),this.minotar=app.session.user.attribute("minotar")},e.className=function(){return"NearataMinecraftAvatarsModal Modal--small"},e.title=function(){return app.translator.trans("nearata-minecraft-avatars.forum.title")},e.content=function(){var t=this;return[m(".Modal-body",[m(".Form.Form--centered",[this.success?[m("p.helpText",app.translator.trans("nearata-minecraft-avatars.forum.avatar_changed")),m(".Form-group",[m(c.a,{class:"Button Button--primary Button--block",onclick:this.hide.bind(this)},app.translator.trans("nearata-minecraft-avatars.forum.dismiss_button"))])]:[m("p.helpText",app.translator.trans("nearata-minecraft-avatars.forum.help_text")),m(".Form-group",[m("input",{type:"name",name:"minotar",class:"FormControl",placeholder:this.oldMinotar||"Notch",oninput:function(r){return t.minotar=r.target.value},disabled:this.loading,autocomplete:"off"})]),m(".Form-group",[m(c.a,{class:"Button Button--primary Button--block",type:"submit",loading:this.loading},app.translator.trans("nearata-minecraft-avatars.forum.submit_button"))])]])]),m(".Modal-footer",[m("span",["Powered by ",m("a",{href:"https://crafatar.com/",target:"_blank"},"Crafatar")])])]},e.onsubmit=function(t){var r=this;t.preventDefault(),this.minotar!==this.oldMinotar?(this.loading=!0,app.session.user.save({minotar:this.minotar},{errorHandler:this.onerror.bind(this),meta:{minotar:this.minotar}}).then((function(){return r.success=!0})).catch((function(){})).then(this.loaded.bind(this))):this.hide()},n}(a.n(d).a);e.a.initializers.add("nearata-minecraft-avatars",(function(){l.a.prototype.avatarUrl=function(){var t=this.attribute("avatarUrl"),r=this.attribute("minotar");return r?"https://crafatar.com//avatars/"+r+"?size=64":t},Object(o.extend)(s.a.prototype,"controlItems",(function(t){var r=e.a.session.user.attribute("minotar"),a=e.a.translator.trans("nearata-minecraft-avatars.forum.change_button"),n=e.a.translator.trans("nearata-minecraft-avatars.forum.use_button");t.add("nearataMinecraftAvatars",m(c.a,{icon:"fas fa-cloud-upload-alt",onclick:function(){return e.a.modal.show(h)}},r?a:n),1);var o=e.a.session.user.avatarUrl();o?o.startsWith("https://crafatar.com/")?t.remove("upload"):t.remove("nearataMinecraftAvatars"):t.remove("remove")})),Object(o.override)(s.a.prototype,"quickUpload",(function(){})),Object(o.extend)(s.a.prototype,"remove",(function(){this.attrs.user.attribute("minotar")&&e.a.session.user.save({minotar:""}).then(this.success.bind(this),this.failure.bind(this))}))}))}]);
//# sourceMappingURL=forum.js.map