module.exports=function(t){var a={};function r(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=a,r.d=function(t,a,n){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var o in t)r.d(n,o,function(a){return t[a]}.bind(null,o));return n},r.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="",r(r.s=6)}([function(t,a){t.exports=flarum.core.compat.app},function(t,a){t.exports=flarum.core.compat["components/Button"]},function(t,a){t.exports=flarum.core.compat.extend},function(t,a){t.exports=flarum.core.compat["components/AvatarEditor"]},function(t,a){t.exports=flarum.core.compat["models/User"]},function(t,a){t.exports=flarum.core.compat["components/Modal"]},function(t,a,r){"use strict";r.r(a);var n=r(0),o=r.n(n),e=r(2),i=r(3),s=r.n(i),u=r(1),c=r.n(u),p=r(4),l=r.n(p);var f=r(5),d=function(t){var a,r;function n(){return t.apply(this,arguments)||this}r=t,(a=n).prototype=Object.create(r.prototype),a.prototype.constructor=a,a.__proto__=r;var o=n.prototype;return o.oninit=function(a){t.prototype.oninit.call(this,a),this.success=!1,this.oldMinotar=app.session.user.attribute("minotar"),this.minotar=app.session.user.attribute("minotar")},o.className=function(){return"NearataMinecraftAvatarsModal Modal--small"},o.title=function(){return app.translator.trans("nearata-minecraft-avatars.forum.title")},o.content=function(){var t=this;return[m(".Modal-body",[m(".Form.Form--centered",[this.success?[m("p.helpText",app.translator.trans("nearata-minecraft-avatars.forum.avatar_changed")),m(".Form-group",[m(c.a,{class:"Button Button--primary Button--block",onclick:this.hide.bind(this)},app.translator.trans("nearata-minecraft-avatars.forum.dismiss_button"))])]:[m("p.helpText",app.translator.trans("nearata-minecraft-avatars.forum.help_text")),m(".Form-group",[m("input",{type:"name",name:"minotar",class:"FormControl",placeholder:this.oldMinotar||"Notch",oninput:function(a){return t.minotar=a.target.value},disabled:this.loading,autocomplete:"off"})]),m(".Form-group",[m(c.a,{class:"Button Button--primary Button--block",type:"submit",loading:this.loading},app.translator.trans("nearata-minecraft-avatars.forum.submit_button"))])]])]),m(".Modal-footer",[m("span",["Powered by ",m("a",{href:"https://crafatar.com/",target:"_blank"},"Crafatar")])])]},o.onsubmit=function(t){var a=this;t.preventDefault(),this.minotar!==this.oldMinotar?(this.loading=!0,app.session.user.save({minotar:this.minotar},{errorHandler:this.onerror.bind(this),meta:{minotar:this.minotar}}).then((function(){return a.success=!0})).catch((function(){})).then(this.loaded.bind(this))):this.hide()},n}(r.n(f).a);o.a.initializers.add("nearata-minecraft-avatars",(function(){l.a.prototype.avatarUrl=function(){var t=this.attribute("avatarUrl"),a=this.attribute("minotar");return a?"https://crafatar.com//avatars/"+a+"?size=64":t},Object(e.extend)(s.a.prototype,"controlItems",(function(t){var a=o.a.session.user.attribute("minotar"),r=o.a.translator.trans("nearata-minecraft-avatars.forum.change_button"),n=o.a.translator.trans("nearata-minecraft-avatars.forum.use_button");t.add("nearataMinecraftAvatars",m(c.a,{icon:"fas fa-cloud-upload-alt",onclick:function(){return o.a.modal.show(d)}},a?r:n),1);var e=o.a.session.user.avatarUrl();e?e.startsWith("https://crafatar.com/")?t.remove("upload"):t.remove("nearataMinecraftAvatars"):t.remove("remove")})),Object(e.override)(s.a.prototype,"quickUpload",(function(){})),Object(e.extend)(s.a.prototype,"remove",(function(){this.attrs.user.attribute("minotar")&&o.a.session.user.save({minotar:""}).then(this.success.bind(this),this.failure.bind(this))}))}))}]);
//# sourceMappingURL=forum.js.map